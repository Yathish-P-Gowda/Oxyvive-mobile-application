<ForgotPassword>:
    MDFloatLayout:
        id:main
        md_bg_color: 1, 1, 1, 1
        MDIconButton:
            icon: "arrow-left"
            pos_hint: {"center_y": .95}
            user_font_size: "30sp"
            theme_text_color: "Custom"
            text_color: rgba(26, 24, 58, 255)
            on_release: root.on_back_button()
        MDLabel:
            text: "W e l c o m e!"
            font_name: "Roboto"
            font_size: "23sp"
            pos_hint: {"center_x": .6,"center_y": .85}
            color: rgba(0, 0, 0, 255)
        MDLabel:
            text: "Change your password"
            font_name:"Roboto"
            font_size: "18sp"
            pos_hint: {"center_x": .6, "center_y": .79}
            color: rgba(74, 73, 73, 255)
        # Email input
        MDFloatLayout:
            size_hint: .7, .07
            pos_hint: {"center_x": .5, "center_y": .63}
            MDTextField:
                id: phone_email
                hint_text: "Enter Phone Number or Email"
                font_name:"Roboto"
                helper_text:''
                keyboard_suggestions: True
                helper_text_mode:  'on_error'
                pos_hint: {"center_x": .5, "center_y": .5}
                multiline: False
                write_tab: False
                input_type: "number"
                line_color_focus: [75/255, 75/255, 75/255, 1]
                hint_text_color_focus: [75/255, 75/255, 75/255, 1]
                canvas.before:
                    Color:
                        rgba: [75/255, 75/255, 75/255, 1]
            MDTextButton:
                id: sent_otp
                text: "Send OTP"
                font_name:"Roboto"
                font_size: "12sp"
                pos_hint: {"center_x": .9, "center_y": .5}
                color: (1, 0, 0, 1)
                on_release: root.sent_otp()
        MDFloatLayout:
            size_hint: .7, .07
            pos_hint: {"center_x": .5, "center_y": .5}
            MDTextField:
                id: otp
                hint_text: "Enter OTP"
                font_name:"Roboto"
                helper_text:''
                helper_text_mode:  'on_error'
                pos_hint: {"center_x": .5, "center_y": .5}
                cursor_width: "2sp"
                multiline: False
                keyboard_suggestions: True
                write_tab: False
                input_type: "number"
                line_color_focus: [75/255, 75/255, 75/255, 1]
                hint_text_color_focus: [75/255, 75/255, 75/255, 1]
                disabled: True
                canvas.before:
                    Color:
                        rgba: [75/255, 75/255, 75/255, 1]
            MDTextButton:
                id: verify_otp
                text: "Verify"
                font_name:"Roboto"
                font_size: "12sp"
                disabled: True
                disabled_color: (126/255, 128/255, 127/255, 255)
                pos_hint: {"center_x": .9, "center_y": .5}
                color: (1, 0, 0, 1)
                on_release: root.verify_otp()

        # Password input
        MDFloatLayout:
            size_hint: .7, .07
            pos_hint: {"center_x": .5, "center_y": .37}
            MDTextField:
                id: new_password
                hint_text: "New Password"
                font_name:"Roboto"
                helper_text:''
                helper_text_mode:  'on_error'
                pos_hint: {"center_x": .5, "center_y": .5}
                cursor_width: "2sp"
                multiline: False
                keyboard_suggestions: True
                password: not show_password_button.active
                write_tab: False
                line_color_focus: [75/255, 75/255, 75/255, 1]
                hint_text_color_focus: [75/255, 75/255, 75/255, 1]
                disabled: True
                canvas.before:
                    Color:
                        rgba: [75/255, 75/255, 75/255, 1]
            MDIconButton:
                id: show_password_button
                pos_hint: {"center_x": .9, "center_y": .5}
                active: False  # Initial state is password hidden
                text_color: [0, 0, 0, 1]
                opposite_colors: True
                background_palette: "Grey"
                background_hue: "500"
                elevation_normal: 10
                on_release:
                    self.active = not self.active
                    new_password.password = not self.active
                Image:
                    source: "images/eye-off.png" if not show_password_button.active else "images/eye.png"
        # Login button
        MDRaisedButton:
            id: change_password
            text: "Change Password"
            size_hint: .66, .065
            pos_hint: {"center_x": .5, "center_y": .24}
            background_color: 0, 0, 0, 0
            md_bg_color: 1, 0, 0, 1
            font_name: "Roboto"
            disabled: True
            on_release:
                root.change_password()
